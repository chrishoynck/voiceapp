<?xml version="1.0" encoding="UTF-8"?>
<vxml version = "2.1">
    <form id="recordM">
    <var name="saveRec"/>
        <record name="message" beep="true" maxtime="60s">
            <prompt>Please leave your message after the beep, then press any key.</prompt>
        </record>
        <block>
            <prompt>Here's what you recorded <value expr="message"/>.</prompt>
        </block>
        <subdialog name="proceed" src="record1.xml#confirmM" >
            <filled>
                <assign name="saveRec" expr="proceed"/>
            </filled>
        </subdialog>
        <filled>
            <if cond="saveRec=='true'"> 
                    <submit next="https://ict4d.altervista.org/recording.php" enctype="multipart/form-data" method="post"/>
            <else/>
                <goto next="mainvoice.xml#ffarmerMenu"/>
            </if>
        </filled>
    </form>

    <menu id="confirmM" dtmf="true"> 
        <prompt> 
            Press 1 to confirm question and end call. Press 3 to delete message and return to the main menu.
        </prompt> 
        <choice next="#accept"/>
        <choice dtmf="2">
            <value expr="false"/>
        </choice>
        <filled>
            <return namelist="confirmM"/>
        </filled>
    </menu>

    <form id="accept">
        <var name="accept"/>
    </form>

</vxml>